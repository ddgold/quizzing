scalar Date

type FieldError {
	message: String!
	field: String!
}

# ----
# User
# ----
type User {
	id: String!
	nickname: String!
	email: String!
}

type AuthResult {
	accessToken: String
	user: User
	errors: [FieldError!]
}

# -----
# Build
# -----
type Clue {
	answer: String!
	question: String!
}

input ClueInput {
	answer: String!
	question: String!
}

type Category {
	id: String!
	name: String!
	description: String!
	clues: [Clue!]!
	creator: User!
	created: Date!
	updated: Date!
}

type Board {
	id: String!
	name: String!
	description: String!
	categories: [Category!]!
	creator: User!
	created: Date!
	updated: Date!
}

union ResultObject = Board | Category

type FormResult {
	result: ResultObject
	errors: [FieldError!]
}

type QueryResult {
	result: ResultObject
	canEdit: Boolean
}

type SearchResult {
	result: [Category!]
}

# -------
# Queries
# -------
type Query {
	# User
	currentUser: User
	userByEmail(email: String!): User

	# Build
	boards(showAll: Boolean!): [Board!]
	boardById(id: String!): QueryResult

	categories(showAll: Boolean!): [Category!]
	categoryById(id: String!): QueryResult
	categorySearch(name: String!): SearchResult!
}

# ---------
# Mutations
# ---------
type Mutation {
	# User
	login(email: String!, password: String!): AuthResult!
	logout: Boolean
	register(nickname: String!, email: String!, password: String!): AuthResult!

	# Build
	createBoard(name: String!): FormResult!
	updateBoard(id: String!, name: String!, description: String!, categoryIds: [String!]!): FormResult!

	createCategory(name: String!): FormResult!
	updateCategory(id: String!, name: String!, description: String!, clues: [ClueInput!]!): FormResult!
}
